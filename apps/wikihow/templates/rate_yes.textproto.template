# vim: set filetype=conf:

id: "rate_yes"
name: "WikiHow Personal Task Primitive - Rate Yes"
description: "A demo task primitive asking to rate yes for the article"

#include basic.prototext.template

event_sources: [
    {
        text_detect: {
            expect: "Read more|like this one"
            rect: {
                x0: 0.10
                y0: 0.70
                x1: 0.94
                y1: 1.0
            }
        }
        id: 1
    },
    {
        view_hierarchy_event: {
            view_hierarchy_path: [
                "android.widget.FrameLayout",
                "android.widget.LinearLayout@com.wikihow.wikihowapp:id/action_bar_root",
                "android.drawerlayout.widget.DrawerLayout@com.wikihow.wikihowapp:id/drawer_layout",
                "android.webkit.WebView",
                "android.view.View@mw-mf-viewport",
                "android.view.View@mw-mf-page-center",
                "android.view.View@content_wrapper",
                "android.view.View@content_inner",
                "android.view.View@bodyContent",
                "android.view.View@article_rating_mobile",
                "android.view.View@amp-rate-form-yes",
                "android.widget.TextView"
            ]
            properties: [
                {
                    property_name: "text"
                    pattern: "Read more articles|like this one"
                }
            ]
        }
        id: 2
    }
]

event_slots: {
    reward_listener: {
        type: OR
        id: 3
        events: [
            { id: 1 },
            { id: 2 }
        ]
        transformation: "y = 1"
    }
    episode_end_listener: {
        events: [ { id: 3 } ]
        transformation: "y = True"
    }
}

command: "Rate yes for the article."
